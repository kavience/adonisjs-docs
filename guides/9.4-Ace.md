---
summary: Ace å‘½ä»¤è¡Œç®€ä»‹ã€‚ Ace æ˜¯ä¸€ä¸ªåµŒå…¥å¼ CLI æ¡†æ¶ï¼Œå…è®¸æ‚¨åˆ›å»ºç‰¹å®šäºé¡¹ç›®çš„å‘½ä»¤ã€‚
---


Ace æ˜¯åµŒå…¥åˆ° AdonisJS æ ¸å¿ƒçš„å‘½ä»¤è¡Œæ¡†æ¶ã€‚è¯¸å¦‚ `node ace serve` æˆ– `node ace make:controller` ä¹‹ç±»çš„å‘½ä»¤ç”± Ace CLI æä¾›æ”¯æŒã€‚

Ace è¿˜å…è®¸ä½ é€šè¿‡å°†å®ƒä»¬æœ¬åœ°å­˜å‚¨åœ¨é¡¹ç›®ä»£ç åº“ä¸­æ¥åˆ›å»ºè‡ªå®šä¹‰å‘½ä»¤ã€‚

## ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨ Ace è€Œä¸æ˜¯ npm è„šæœ¬ï¼Ÿ

å¤§å¤šæ•° Node.js é¡¹ç›®å¹¿æ³›ä½¿ç”¨ [npm è„šæœ¬](https://docs.npmjs.com/cli/v7/using-npm/scripts)ã€‚Npm è„šæœ¬å¾ˆæ£’ï¼Œå› ä¸ºå®ƒä»¬å…è®¸ä½ åœ¨æ¯ä¸ªé¡¹ç›®çš„åŸºç¡€ä¸Šå®šä¹‰è„šæœ¬ï¼Œè€Œä¸æ˜¯åœ¨è®¡ç®—æœºä¸Šçš„æŸä¸ªåœ°æ–¹å…¨å±€å®šä¹‰å®ƒä»¬ã€‚

ä½†æ˜¯ï¼Œnpm è„šæœ¬æ²¡æœ‰ä¸ºä½ æä¾›ä»»ä½•å·¥å…·æ¥åˆ›å»º CLI å‘½ä»¤ã€‚ä½ ä»ç„¶å¿…é¡»æ‰‹åŠ¨è§£æ CLI å‚æ•°/æ ‡å¿—å¹¶ç®¡ç†å‘½ä»¤ç”Ÿå‘½å‘¨æœŸã€‚

å¦ä¸€æ–¹é¢ï¼ŒAce æ˜¯ç”¨äºåˆ›å»º CLI æ¥å£çš„åˆé€‚æ¡†æ¶ã€‚

## ä½¿ç”¨

æ¯ä¸ªæ–°çš„ AdonisJS åº”ç”¨ç¨‹åºéƒ½é¢„å…ˆé…ç½®äº† Aceï¼Œä½ å¯ä»¥ä½¿ç”¨å­˜å‚¨åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­çš„ `ace` æ–‡ä»¶è¿è¡Œå®ƒã€‚

```sh
node ace
```

![Help screen](https://res.cloudinary.com/adonis-js/image/upload/v1617207298/v5/ace-help.png)

`ace` æ–‡ä»¶æ˜¯ä¸€ä¸ªæ— æ‰©å±•åçš„ JavaScript æ–‡ä»¶ï¼Œä½ å¯ä»¥åƒä»»ä½•å…¶ä»– Node.js ç¨‹åºä¸€æ ·æ‰§è¡Œå®ƒã€‚è¿è¡Œæ­¤æ–‡ä»¶å°†å¯åŠ¨å‘½ä»¤è¡Œæ¡†æ¶å¹¶æ‰§è¡Œä¸Šè¿°å‘½ä»¤ã€‚

ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `node ace --help` åˆ—å‡ºæ‰€æœ‰å‘½ä»¤ï¼Œå¹¶ä½¿ç”¨ `node ace <command-name> --help` æŸ¥çœ‹ç‰¹å®šå‘½ä»¤çš„å¸®åŠ©ã€‚

## å‘½ä»¤åœ¨å“ªé‡Œå®šä¹‰?

Ace å…è®¸ä½ å’Œä½ å®‰è£…çš„è½¯ä»¶åŒ…æä¾›å‘½ä»¤ã€‚å®ƒä»¬åœ¨ `commands` æ•°ç»„ä¸‹çš„ `.adonisrc.json` æ–‡ä»¶ä¸­å®šä¹‰ã€‚

```json
{
  "commands": [
    "./commands",
    "@adonisjs/core/build/commands",
    "@adonisjs/repl/build/commands"
  ]
}
```

æ•°ç»„ä¸­çš„æ¯ä¸ªæ¡ç›®éƒ½å¿…é¡»æŒ‡å‘ä¸€ä¸ª[å¯¼å‡º Ace å‘½ä»¤](https://github.com/adonisjs/core/blob/develop/commands/GenerateKey.ts) çš„æ–‡ä»¶ã€‚æˆ–è€…å®ƒå¯ä»¥å¯¼å‡º [é™„åŠ å‘½ä»¤æ•°ç»„](https://github.com/adonisjs/core/blob/develop/commands/index.ts)ã€‚

ç¬¬ä¸€ä¸ªæ¡ç›® `./commands` æ˜¯å¯¹é¡¹ç›®å‘½ä»¤ç›®å½•çš„å¼•ç”¨ã€‚æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶è¢«æ‰«æå¹¶æ³¨å†Œä¸ºå‘½ä»¤ã€‚

## åˆ›å»ºä¸€ä¸ªæ–°å‘½ä»¤

ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹ Ace å‘½ä»¤æ¥åˆ›å»ºæ–°å‘½ä»¤ã€‚

```sh
node ace make:command Greet

# CREATE: commands/Greet.ts
```

åœ¨è¿è¡Œæ–°åˆ›å»ºçš„å‘½ä»¤ä¹‹å‰ï¼Œä½ å¿…é¡»é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯¹å…¶è¿›è¡Œç´¢å¼•ã€‚[äº†è§£ä¸ºä»€ä¹ˆéœ€è¦ç´¢å¼•](#generating-the-ace-manifest-file)

```sh
node ace generate:manifest
```

æœ€åï¼Œä½ å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è¿è¡Œå‘½ä»¤ï¼š

```sh
node ace greet

# [ info ]  Hello world!
```

## å‘½ä»¤ç»“æ„

Ace å‘½ä»¤æ˜¯ç»§æ‰¿è‡ª `BaseCommand` ç±»ã€‚ä½ å°†å‘½ä»¤åç§°å’Œæè¿°å®šä¹‰ä¸ºç±»æœ¬èº«çš„é™æ€å±æ€§ã€‚

```ts
import { BaseCommand } from '@adonisjs/core/build/standalone'

export default class Greet extends BaseCommand {
  public static commandName = 'greet'

  public static description = ''

  public static settings = {
    loadApp: false,
    stayAlive: false,
  }

  public async run () {
    this.logger.info('Hello world!')
  }
}
```

#### commandName

è¿è¡Œå‘½ä»¤æ—¶åº”é”®å…¥çš„å‘½ä»¤çš„åç§°ã€‚å®ƒåº”è¯¥å§‹ç»ˆæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

---

#### description

å‘½ä»¤æè¿°æ˜¾ç¤ºåœ¨å¸®åŠ©è¾“å‡ºä¸­ã€‚ä½¿ç”¨æ­¤å±æ€§ç®€è¦è¯´æ˜è¯¥å‘½ä»¤çš„ä½œç”¨ã€‚

---

#### settings

settings å±æ€§æ§åˆ¶å‘½ä»¤çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚

| å‚æ•°          | æè¿°                                                                                           |
| ------------- | ---------------------------------------------------------------------------------------------- |
| **loadApp**   | æŒ‡ç¤º Ace åœ¨è¿è¡Œæ–¹æ³•ä¹‹å‰å¯åŠ¨åº”ç”¨ç¨‹åºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘½ä»¤ä¸ä¼šåŠ è½½åº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯ä½œä¸ºç‹¬ç«‹è„šæœ¬æ‰§è¡Œã€‚|
| **stayAlive** | æŒ‡ç¤º Ace åœ¨è¿è¡Œå‘½ä»¤åä¸è¦ç»ˆæ­¢è¿›ç¨‹ã€‚ä½†æ˜¯ï¼Œè¯·ç¡®ä¿ä½¿ç”¨ `await this.exit()` æ‰‹åŠ¨ç»ˆæ­¢è¿›ç¨‹          |

#### aliases

ä½ è¿˜å¯ä»¥ä¸ºå‘½ä»¤åç§°å®šä¹‰ä¸€ä¸ªåˆ«åæ•°ç»„ã€‚è¿™å…è®¸å…¶ä»–äººä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åæ‰§è¡Œå‘½ä»¤ã€‚

```ts
export default class Greet extends BaseCommand {
  public static commandName = 'greet'
  // highlight-start
  public static aliases = ['welcome', 'hi']
  // highlight-end
}
```

---

#### run

æ¯ä¸ªå‘½ä»¤éƒ½å¿…é¡»å®ç° `run` æ–¹æ³•å¹¶ç¼–å†™é€»è¾‘æ¥å¤„ç†å…¶ä¸­çš„å‘½ä»¤ã€‚

---

### åœ¨å‘½ä»¤ä¸­å¯åŠ¨åº”ç”¨ç¨‹åº
Ace å‘½ä»¤åœ¨è¿è¡Œå‘½ä»¤ä¹‹å‰ä¸ä¼šå¯åŠ¨ä½ çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ çš„å‘½ä»¤ä¾èµ–äºåº”ç”¨ç¨‹åºä»£ç ï¼Œä½ å¿…é¡»æŒ‡ç¤ºå‘½ä»¤å…ˆåŠ è½½åº”ç”¨ç¨‹åºï¼Œç„¶åæ‰§è¡Œ `run` æ–¹æ³•ã€‚

```ts
export default class Greet extends BaseCommand {
  public static commandName = 'greet'
  // highlight-start
  public static settings = {
    loadApp: true
  }
  // highlight-end
}
```

---

### ä¸å…è®¸é¡¶çº§å¯¼å…¥
ä¸å…è®¸ä¾èµ– IoC å®¹å™¨æˆ–åº”ç”¨ç¨‹åºä»£ç åº“çš„é¡¶çº§å¯¼å…¥ï¼Œä½ å¿…é¡»å°†å®ƒä»¬ç§»åŠ¨åˆ° `run` æ–¹æ³•ä¸­ã€‚ä¾‹å¦‚ï¼š

âŒ æ— æ•ˆ
```ts
import User from 'App/Models/User'

export default class CreateUser extends BaseCommand {
  public static commandName = 'create:user'
  public static settings = {
    loadApp: true
  }

  public async run() {
    await User.create({})
  }
}
```

âœ… ç”Ÿæ•ˆ, åœ¨ `run` æ–¹æ³•é‡Œé¢å¯¼å…¥
```ts
export default class CreateUser extends BaseCommand {
  public static commandName = 'create:user'
  public static settings = {
    loadApp: true
  }

  public async run() {
    const { default: User } = await import('App/Models/User')
    await User.create()
  }
}
```

#### ğŸ¤·â€â™‚ï¸ åŸå› 

è®©æˆ‘ä»¬å°è¯•å¯è§†åŒ–å‘½ä»¤ç”Ÿå‘½å‘¨æœŸï¼Œä»¥äº†è§£ä¸ºä»€ä¹ˆä¸å…è®¸é¡¶çº§å¯¼å…¥ã€‚

- `User` æ¨¡å‹å¯¼å…¥åœ¨å†…éƒ¨ä» IoC å®¹å™¨å¯¼å…¥ Lucid ORMã€‚
- ç”±äºåº”ç”¨ç¨‹åºå°šæœªå¯åŠ¨ï¼ŒLucid ORM ä¸å¯ç”¨ã€‚
- è¦åŠ è½½åº”ç”¨ç¨‹åºï¼ŒAce å¿…é¡»é¦–å…ˆè®¿é—®å‘½ä»¤æ„é€ å‡½æ•°ä¸­å®šä¹‰çš„ `settings.loadApp` å±æ€§ã€‚
- ä½†æ˜¯ï¼Œå®ƒä¸èƒ½ï¼Œå› ä¸ºé¡¶çº§å¯¼å…¥ä¼šå¯¼è‡´é”™è¯¯ã€‚

è¿˜æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥è®¾è®¡æ­¤å·¥ä½œæµç¨‹ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºå°†å¯¼å…¥ç§»åŠ¨åˆ° `run` æ–¹æ³•ä¸­å€¼å¾—å°†æ‰€æœ‰å‘½ä»¤è®¾ç½®å’Œå…ƒæ•°æ®ä¿å­˜åœ¨å•ä¸ªæ–‡ä»¶ä¸­çš„éº»çƒ¦ã€‚

## CLI å‚æ•°

ä½ å°†å‘½ä»¤æ¥å—çš„å‚æ•°å’Œæ ‡å¿—æ³¨å†Œä¸ºç±»çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š

```ts
import {
  BaseCommand,
  args,
  flags
} from '@adonisjs/core/build/standalone'

export default class Greet extends BaseCommand {
  public static commandName = 'greet'

  // highlight-start
  @args.string({ description: 'Name of the person to greet' })
  public name: string

  @flags.boolean({ alias: 'i', description: 'Enable interactive mode' })
  public interactive: boolean
  // highlight-end

  public async run() {}
}
```

ç¡®ä¿é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ Ace æ¸…å•æ–‡ä»¶ã€‚

```sh
node ace generate:manifest
```

ç„¶åæŸ¥çœ‹ `greet` å‘½ä»¤çš„å¸®åŠ©ã€‚

```sh
node ace greet --help
```

![](https://res.cloudinary.com/adonis-js/image/upload/q_auto,f_auto/v1617325150/v5/command-args-flags.png)

### å‚æ•°

å‘½ä»¤å‚æ•°æ˜¯ä½ç½®å‚æ•°ï¼Œå®ƒä»¬çš„æ¥å—é¡ºåºä¸ä½ åœ¨ç±»ä¸­å®šä¹‰å®ƒä»¬çš„é¡ºåºç›¸åŒã€‚ä¾‹å¦‚ï¼š

```ts
export default class Greet extends BaseCommand {
  @args.string()
  public name: string

  @args.string()
  public age: string

  @args.string()
  public height: string
}
```

```sh
node ace greet <name> <age> <height>
```


#### args.string

å°†å±æ€§æ ‡è®°ä¸ºå‘½ä»¤è¡Œå‚æ•°ã€‚æ³¨æ„ï¼šå‘½ä»¤å‚æ•°å§‹ç»ˆè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ã€‚å¦‚æœæœŸæœ›éå­—ç¬¦ä¸²å€¼ï¼Œä½ å°†ä¸å¾—ä¸è‡ªå·±æ‰§è¡Œç±»å‹è½¬æ¢ã€‚

```ts
@args.string({
  description: 'The argument description',
  name: 'username'
})
public name: string
```

#### args.spread

`@args.spread` æ–¹æ³•å…è®¸ä½ å®šä¹‰ä¸€ä¸ªåŒ…ç½—ä¸‡è±¡çš„å‚æ•°ã€‚å®ƒå°±åƒ JavaScript ä¸­çš„ [rest parameters ](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)ï¼Œå¿…é¡»å§‹ç»ˆæ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚

```ts
import { BaseCommand, args } from '@adonisjs/core/build/standalone'

export default class FileReader extends BaseCommand {
  public static commandName = 'read'

  // highlight-start
  @args.spread()
  public files: string[]
    // highlight-end

  public async run () {
    console.log(this.files)
  }
}
```

```sh
node ace read foo.txt bar.txt baz.txt
```

è¾“å‡ºå°†ä¼šæ˜¯

```ts
[ 'foo.txt', 'bar.txt', 'baz.txt' ]
```

#### å‚æ•°

æ‰€æœ‰çš„ `@args` æ–¹æ³•éƒ½æ¥å—ä»¥ä¸‹é€‰é¡¹ã€‚

| å‚æ•°            | æè¿°                                               |
| --------------- | -------------------------------------------------- |
| **description** | å‚æ•°çš„å¸®åŠ©è¯´æ˜                                     |
| **name**        | ä¸ºå‚æ•°å®šä¹‰ä¸€ä¸ªå…¬å…±åç§°ï¼ˆå‡ºç°åœ¨å¸®åŠ©è¾“å‡ºä¸­çš„é‚£ä¸ªï¼‰ã€‚|

## æ ‡å¿—

ä½ ä½¿ç”¨ `@flags` è£…é¥°å™¨å®šä¹‰æ ‡å¿—ã€‚æ ‡å¿—å¯ä»¥æ¥å— `boolean`ã€`string/string[]` æˆ– `number/number[]` å€¼ã€‚

#### flags.boolean

æ¥å—ä¸€ä¸ªå¸ƒå°”æ ‡å¿—ã€‚

```ts
@flags.boolean()
public interactive: boolean
```

å¸ƒå°”æ ‡å¿—çš„å€¼é»˜è®¤ä¸º"false"ï¼Œé™¤éå·²æŒ‡å®šæ ‡å¿—ã€‚ä½†æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰é»˜è®¤å€¼ã€‚

```ts
@flags.boolean()
public interactive: boolean = true
```

è¦åœ¨è¿è¡Œæ—¶ç¦ç”¨è¯¥æ ‡å¿—ï¼Œä½ å¿…é¡»ä½¿ç”¨ `--no` å…³é”®å­—æ¥å¦å®šå®ƒã€‚

```sh
node ace greet virk --no-interactive
```

#### flags.string

å®šä¹‰ä¸€ä¸ªæ¥å—å­—ç¬¦ä¸²å€¼çš„æ ‡å¿—ã€‚

```ts
@flags.string()
public email: string

@flags.string()
public password: string
```

#### flags.array

å®šä¹‰ä¸€ä¸ªå¯ä»¥é‡å¤å¤šæ¬¡çš„æ ‡å¿—ã€‚è¯¥å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚

```ts
@flags.array()
public files: string[]
```

```sh
node ace read --files=foo.txt --files=bar.txt

## Or separate them with comma
node ace read --files=foo.txt,bar.txt
```

```ts
console.log(this.files)

// ['foo.txt', 'bar.txt']
```

#### flags.number

å®šä¹‰ä¸€ä¸ªæ¥å—æ•°å­—å€¼çš„æ ‡å¿—ã€‚

```ts
@flags.number({ alias: 'i' })
public iterations: number
```

#### flags.numArray

ä¸ [@flags.array](#flagsarray) ç›¸åŒï¼Œä½†æ¥å—ä¸€ä¸ªæ•°å­—æ•°ç»„ã€‚

```ts
@flags.numArray()
public counters: number[]
```

#### Options

æ‰€æœ‰çš„ `@flags` è£…é¥°å™¨éƒ½æ¥å—ä»¥ä¸‹é€‰é¡¹ã€‚

| å‚æ•°            | æè¿°                                                 |
| --------------- | ---------------------------------------------------- |
| **alias**       | æ ‡å¿—çš„ç®€å†™åç§°ã€‚ç®€å†™åç§°å§‹ç»ˆä½¿ç”¨å•ä¸ªç ´æŠ˜å· `-` å®šä¹‰ |
| **description** | æ ‡å¿—çš„å¸®åŠ©è¯´æ˜                                       |
| **name**        | æ ‡å¿—çš„å…¬å…±åç§°ï¼ˆå‡ºç°åœ¨å¸®åŠ©è¾“å‡ºä¸­çš„åç§°ï¼‰ã€‚          |

## Prompts

Ace å†…ç½®æ”¯æŒåœ¨ç»ˆç«¯ä¸Šåˆ›å»ºäº¤äº’å¼æç¤ºã€‚ä½ å¯ä»¥ä½¿ç”¨ `this.prompt` å±æ€§è®¿é—® `prompts` æ¨¡å—ã€‚

ä»¥ä¸‹æ˜¯ä¸€èµ·ä½¿ç”¨å¤šä¸ªæç¤ºçš„ç¤ºä¾‹ã€‚

```ts
import { BaseCommand } from '@adonisjs/core/build/standalone'

export default class CreateUser extends BaseCommand {
  public static commandName = 'create:user'
  public static description = 'Create a new user'

  public async run () {
    const email = await this.prompt.ask('Enter email')
    const password = await this.prompt.secure('Choose account password')
    const userType = await this.prompt.choice('Select account type', [
      {
        name: 'admin',
        message: 'Admin (Complete access)',
      },
      {
        name: 'collaborator',
        message: 'Collaborator (Can access specific resources)',
      },
      {
        name: 'user',
        message: 'User (Readonly access)',
      }
    ])

    const verifyEmail = await this.prompt.confirm('Send account verification email?')
    const accountTags = await this.prompt.enum('Type tags to associate with the account')

    console.log({
      email, password, userType, verifyEmail, accountTags
    })
  }
}
```

[command-prompts.mp4](https://res.cloudinary.com/adonis-js/video/upload/q_auto/v1617259966/v5/command-prompts.mp4)

#### prompt.ask

æ˜¾ç¤ºè¾“å…¥å€¼çš„æç¤ºã€‚å¯é€‰æ‹©æ¥å— [options](#all-prompts-options) ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚

```ts
await this.prompt.ask('Choose account username', {
  validate(answer) {
    if (!answer || answer.length < 4) {
      return 'Username is required and must be over 4 characters'
    }

    return true
  },
})
```

#### prompt.secure

ä½¿ç”¨`password`æç¤ºç±»å‹ã€‚å¯é€‰æ‹©æ¥å— [options](#all-prompts-options) ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚

```ts
await this.prompt.secure('Enter account password', {
  validate(answer) {
    if (!answer) {
      return 'Password is required to login'
    }

    return true
  },
})
```

#### prompt.confirm

æ˜¾ç¤ºåœ¨`true`å’Œ`false`ä¹‹é—´è¿›è¡Œé€‰æ‹©çš„æç¤ºã€‚æˆ–è€…ï¼Œä½ å¯ä»¥å°†é…ç½® [options](#all-prompts-options) ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚

```ts
await this.prompt.confirm('Want to delete files?')
```

#### prompt.toggle

ç±»ä¼¼äº `confirm` æç¤ºã€‚ä½†æ˜¯ï¼Œå®ƒå…è®¸è‡ªå®šä¹‰"æ˜¯"å’Œ"å¦"æ˜¾ç¤ºå€¼ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥å°†é…ç½® [options](#all-prompts-options) ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚

```ts
await this.prompt.toggle('Want to delete files?', ['Yep', 'Nope'])
```


#### prompt.choice

æ˜¾ç¤ºä¸€ä¸ªé€‰é¡¹åˆ—è¡¨ï¼Œå¯ä»¥åªé€‰æ‹©ä¸€ä¸ªã€‚æˆ–è€…ï¼Œä½ å¯ä»¥å°†é…ç½® [options](#all-prompts-options) ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ã€‚

```ts
await this.prompt.choice('Select installation client', ['npm', 'yarn'])
```

æˆ–è€…å°†é€‰æ‹©ä½œä¸ºå¯¹è±¡æ•°ç»„ä¼ é€’ã€‚

```ts
await this.prompt.choice('Select toppings', [
  {
    name: 'Jalapenos',
    hint: 'Marinated in vinegar, will taste sour',
  },
  {
    name: 'Lettuce',
    hint: 'Fresh and leafy',
  },
])
```

#### prompt.multiple

æ˜¾ç¤ºé€‰é¡¹åˆ—è¡¨å¹¶å…è®¸é€‰æ‹©å¤šä¸ªé€‰é¡¹ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥å°†é…ç½® [options](#all-prompts-options) ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ã€‚

```ts
await this.prompt.multiple('Select base dependencies', [
  '@adonisjs/core', '@adonisjs/bodyparser'
])
```

æˆ–è€…å°†é€‰æ‹©ä½œä¸ºå¯¹è±¡ä¼ é€’ã€‚

```ts
await this.prompt.multiple('Select base dependencies', [
  {
    name: '@adonisjs/core',
    message: 'Framework core',
  },
  {
    name: '@adonisjs/bodyparser',
    message: 'Bodyparser',
  },
])
```

#### prompt.autocomplete

æ˜¾ç¤ºé€‰é¡¹åˆ—è¡¨ä»¥è¿›è¡Œä¸€ä¸ªæˆ–å¤šä¸ªé€‰æ‹©ï¼Œå¹¶èƒ½å¤Ÿè¿‡æ»¤åˆ—è¡¨é¡¹ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥å°†é…ç½® [options](#all-prompts-options) ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ã€‚

```ts
await this.prompt.autocomplete(
  'Select country',
  ['India', 'USA', 'UK', 'Ireland', 'Australia']
)
```

å¯¹äºå¤šé€‰ï¼Œä½ å¯ä»¥è®¾ç½® `options.multiple = true`ã€‚

```ts
await this.prompt.autocomplete(
  'Select country',
  ['India', 'USA', 'UK', 'Ireland', 'Australia'],
  { multiple: true }
)
```

#### prompt.enum

ç±»ä¼¼äº `ask` æç¤ºï¼Œä½†å…è®¸ä½¿ç”¨é€—å· (,) åˆ†éš”å€¼ã€‚å¯é€‰æ‹©æ¥å— [options](#all-prompts-options) ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚

```ts
await this.prompt.enum('Define tags', {
  hint: 'Accepts comma separated values',
})
```

#### æ‰€æœ‰çš„ prompts å‚æ•°

<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>default</strong></td>
<td>
<p>The default value to use, when no input has been provided</p>

```ts
{
  default: 'Virk'
}
```

</td>
</tr>
<tr>
<td><strong>hint</strong></td>
<td>
<p>Display hint to help fill the input</p>

```ts
{
  hint: 'Email will be used for login.'
}
```

</td>
</tr>
<tr>
<td><strong>result</strong></td>
<td>
<p>Modify the result. The method is invoked just before resolving the prompt promise</p>
<p> <strong> Note </strong> The value will differ based upon the input type. For example: The value for <code>prompt.multiple</code> will be an array or selections.

```ts
{
  result: (value) => {
    return value.toUppercase()
  }
}
```

</td>
</tr>
<tr>
<td><strong>format</strong></td>
<td>
<p>Format the user input in real time (as they type).</p>
<p> <strong> Note </strong> The value will differ based upon the input type. For example: The value for <code>prompt.multiple</code> will be an array or selections.

```ts
{
  format: (value) => {
      return value.toUppercase()
  }
}
```

</td>
</tr>
<tr>
<td><strong>validate</strong></td>
<td>
<p>Validate the user input. Return <code>true</code> to pass the validation or <code>false/error message</code></p>
<p> <strong> Note </strong> The value will differ based upon the input type. For example: The value for <code>prompt.multiple</code> will be an array or selections.

```ts
{
  validate: (value) => {
    if (!value) {
      return 'Enter value'
    }

    return true
  }
}
```

</td>
</tr>
</tbody>
</table>

## Logger
ä½ å¯ä»¥ä½¿ç”¨å†…ç½®è®°å½•å™¨å°†æ¶ˆæ¯è®°å½•åˆ°æ§åˆ¶å°ã€‚å¦‚æœç»ˆç«¯ä¸æ”¯æŒé¢œè‰²ï¼Œæˆ‘ä»¬ä¼šè‡ªåŠ¨å»é™¤é¢œè‰²å’Œå›¾æ ‡ã€‚

```ts
export default class Greet extends BaseCommand {
  public static commandName = 'greet'
  public static description = 'Greet a person by their name'

  public async run () {
    this.logger.info('This is an info message')
    this.logger.warning('Running out of disk space')
    this.logger.error(new Error('Unable to write. Disk full'))
    this.logger.fatal(new Error('Unable to write. Disk full'))
    this.logger.debug('Something just happened')
    this.logger.success('Account created')
    this.logger.info('Message with time prefix', '%time%')

    const spinner = this.logger.await(
      'installing dependencies'
      undefined,
      'npm install --production'
    )

    // perform some task
    spinner.stop()
  }
}
```

![](https://res.cloudinary.com/adonis-js/image/upload/q_auto,f_auto/v1617272056/v5/ace-logger-output.png)

æ‰€æœ‰è®°å½•å™¨æ–¹æ³•è¿˜æ¥æ”¶æ—¥å¿—æ¶ˆæ¯"å‰ç¼€"å’Œ"åç¼€"çš„å¯é€‰å€¼ã€‚

```ts
this.logger.info('hello world', 'prefix', 'suffix')
```

### Actions
é™¤äº†æ ‡å‡†æ—¥å¿—æ¶ˆæ¯ï¼Œä½ è¿˜å¯ä»¥æ˜¾ç¤ºç‰¹å®šæ“ä½œçš„æ—¥å¿—æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºæ–‡ä»¶çš„æ“ä½œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥æ˜¾ç¤ºå…¶çŠ¶æ€ã€‚

> è®°å½•å™¨æ“ä½œä»…ç”¨äºæ˜¾ç¤º UIã€‚ä½ ä»ç„¶éœ€è¦æ‰‹åŠ¨æ‰§è¡Œæ“ä½œã€‚

```ts
const filePath = 'app/Models/User.ts'

this.logger.action('create').succeeded(filePath)
this.logger.action('create').skipped(filePath, 'File already exists')
this.logger.action('create').failed(filePath, 'Something went wrong')
```

![](https://res.cloudinary.com/adonis-js/image/upload/q_auto,f_auto/v1617281150/v5/logger-actions.png)

### æ›´æ–°ç°æœ‰æ—¥å¿—è¡Œ
è®°å½•å™¨è¿˜å…è®¸ä½ é€šè¿‡æ›´æ–°ç°æœ‰æ—¥å¿—è¡Œæ¥è®°å½•æ¶ˆæ¯ã€‚ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä½ å¯ä»¥ç»˜åˆ¶æ–‡æœ¬å’Œ ASCII è¿›åº¦æ¡ã€‚

æ¯æ¬¡è¿è¡Œ `logUpdate` æ–¹æ³•æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨æ–°æ¶ˆæ¯æ›´æ–°ç°æœ‰æ—¥å¿—è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨ `logUpdatePersist` æ–¹æ³•ä¿ç•™å¹¶ç§»åŠ¨åˆ°æ–°è¡Œã€‚

ä»¥ä¸‹æ˜¯æ˜¾ç¤ºè¿›åº¦æ¡çš„å®Œæ•´å·¥ä½œç¤ºä¾‹ã€‚

```ts
import { BaseCommand } from '@adonisjs/core/build/standalone'

export default class Greet extends BaseCommand {
  public static commandName = 'greet'

  private getProgressBar(currentPercentage: number) {
    /**
     * Draw one cell for almost every 3%. This is to ensure the
     * progress bar renders fine on smaller terminal width
     */
    const completed = Math.ceil(currentPercentage / 3)
    const incomplete = Math.ceil((100 - currentPercentage) / 3)
    return `[${new Array(completed).join('=')}${new Array(incomplete).join(' ')}]`
  }

  public async run () {
    for (let i = 0; i <= 100; i = i + 2) {
      await new Promise((resolve) => setTimeout(resolve, 50))
      this.logger.logUpdate(`downloading ${this.getProgressBar(i)} ${i}%`)
    }

    this.logger.logUpdatePersist()
  }
}
```

[progress-bar-ace.mov](https://res.cloudinary.com/adonis-js/video/upload/q_auto/v1617273444/v5/progress-bar-ace.mov)

## CLI UI
CLI UI å°† API å…¬å¼€ç»™ **draw tables**, **render instructions inside a box**, å’Œ **animate progress for tasks**.

### è¡¨æ ¼
ä½ å¯ä»¥ä½¿ç”¨ `this.ui.table` å±æ€§ç»˜åˆ¶è¡¨æ ¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç›¸åŒçš„ä¾‹å­ã€‚

```ts
const table = this.ui.table()
table.head(['Name', 'Email', 'Score'])

// Optionally define column widths
table.columnWidths([15, 30, 10])

// Add new rows
table.row(['Virk', 'virk@adonisjs.com', '67'])
table.row(['Romain', 'romain@adonisjs.com', '82'])
table.row(['Nikk', 'nikk@adonisjs.com', '41'])

// Render the table
table.render()
```

- ä½¿ç”¨ `this.ui.table()` æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°è¡¨å®ä¾‹ã€‚
- ä½¿ç”¨ `.head()` æ–¹æ³•åˆ›å»ºè¡¨å¤´å¹¶ä¼ é€’è¦åˆ›å»ºçš„åˆ—æ•°ç»„ã€‚
- ä½¿ç”¨ `.row()` æ–¹æ³•æ·»åŠ æ–°è¡Œã€‚
- æœ€åï¼Œä½¿ç”¨ `.render()` æ–¹æ³•æ¸²æŸ“è¡¨æ ¼ã€‚

![](https://res.cloudinary.com/adonis-js/image/upload/q_auto,f_auto/v1617281322/v5/ui-table.png)

### æ˜¾ç¤ºè¯´æ˜
ä½ å¯ä»¥é€šè¿‡å°†æŒ‡ä»¤ç»˜åˆ¶åœ¨æœ‰ç•Œæ¡†å†…æ¥æ˜¾ç¤ºç»™å®šæ“ä½œçš„æŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼š

```ts
this.ui
  .instructions()
  .add(`cd ${this.colors.cyan('hello-world')}`)
  .add(`Run ${this.colors.cyan('node ace serve --watch')} to start the server`)
  .render()
```

- è°ƒç”¨ `this.ui.instructions()` æ–¹æ³•å¼€å§‹ä¸€ä¸ªæ–°çš„æŒ‡ä»¤å—ã€‚
- æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ `.add()` æ–¹æ³•æ·»åŠ æ–°è¡Œã€‚
- æœ€åï¼Œè°ƒç”¨`.render()`æ–¹æ³•åœ¨æ§åˆ¶å°ä¸Šæ¸²æŸ“å®ƒã€‚

![](https://res.cloudinary.com/adonis-js/image/upload/q_auto,f_auto/v1617281756/v5/logger-instructions.png)

### Sticker
Sticker ç±»ä¼¼äº"è¯´æ˜"å—ã€‚ä½†æ˜¯ï¼Œå®ƒä¸ä¼šåœ¨è¡Œå‰åŠ ä¸ŠæŒ‡é’ˆ`>`ã€‚ä¼‘æ¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚

```ts
this.ui
  .sticker()
  .add('Started HTTP server')
  .add('')
  .add(`Local address:    ${this.colors.cyan('http://localhost:3333')}`)
  .add(`Network address:  ${this.colors.cyan('http://192.168.1.4:3333')}`)
  .render()
```

![](https://res.cloudinary.com/adonis-js/image/upload/q_auto,f_auto/v1617282627/v5/logger-sticker.png)

### ä»»åŠ¡æ¸²æŸ“å™¨
ä½ å¯ä»¥ä½¿ç”¨ä»»åŠ¡æ¸²æŸ“å™¨æ¥æ˜¾ç¤ºå¤šä¸ªæ“ä½œçš„è¾“å‡ºã€‚AdonisJS æœ¬èº«åœ¨æ„å»ºæ–°åº”ç”¨ç¨‹åºæ—¶ä½¿ç”¨å®ƒæ¥æ˜¾ç¤º UIã€‚

ä»»åŠ¡æ¸²æŸ“å™¨æœ‰ä¸¤ç§è¾“å‡ºæ¨¡å¼ï¼Œå³`minimal`å’Œ`verbose`ã€‚å½“ shell [éäº¤äº’å¼](https://github.com/poppinss/cliui/blob/develop/api.ts#L28-L30) æ—¶ï¼Œæˆ‘ä»¬ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° `verbose` æ¨¡å¼ã€‚

```ts
const tasksManager = this.ui.tasks()

// Manually switch to verbose renderer
const tasksManager = this.ui.tasks.verbose()
```

åˆ›å»ºä»»åŠ¡æ¸²æŸ“å™¨åï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨ `.add` æ–¹æ³•æ·»åŠ ä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œå¹¶åœ¨å…¶ä¸­æ‰§è¡Œå®é™…çš„ä»»åŠ¡å·¥ä½œã€‚å®Œæˆä»»åŠ¡æ‰§è¡Œåï¼Œä½ å¿…é¡»è°ƒç”¨ `task.complete` æˆ– `task.fail` ä»¥ç§»åŠ¨åˆ°é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚

```ts
tasksManager
  .add('clone repo', async (logger, task) => {
    // use the logger to log about the progress
    await task.complete()
  })
  .add('install package', async (logger, task) => {
    await task.fail(new Error('Cannot install packages'))
  })
```

å®šä¹‰å®Œæ‰€æœ‰ä»»åŠ¡åè°ƒç”¨ `run` æ–¹æ³•ã€‚

```ts
await tasksManager.run()
```

## æ¨¡æ¿ç”Ÿæˆå™¨
Ace æœ‰ä¸€ä¸ªå†…ç½®çš„è½»é‡çº§æ¨¡æ¿ç”Ÿæˆå™¨ã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒä»é¢„å…ˆå­˜åœ¨çš„å­˜æ ¹ç”Ÿæˆæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š

```ts
import { join } from 'path'
import { BaseCommand } from '@adonisjs/core/build/standalone'

export default class Greet extends BaseCommand {
  public static commandName = 'greet'

  public async run() {
    // highlight-start
    const name = 'UsersController'

    this.generator
      .addFile(name)
      .appRoot(this.application.appRoot)
      .destinationDir('app/Controllers/Http')
      .useMustache()
      .stub(join(__dirname, './templates/controller.txt'))
      .apply({ name })

    await this.generator.run()
    // highlight-end
  }
}
```

- `generator.addFile` æ–¹æ³•å¯åŠ¨åˆ›å»ºæ–°æ–‡ä»¶çš„è¿‡ç¨‹ã€‚
- ä½¿ç”¨å…¶æµç•…çš„ APIï¼Œä½ å¯ä»¥å®šä¹‰æ–‡ä»¶ç›®æ ‡ã€å­˜æ ¹å’Œè¦ä¼ é€’ç»™å­˜æ ¹çš„æ•°æ®
- æœ€åæ‰§è¡Œ `this.generator.run` ä»¥åˆ›å»ºä½¿ç”¨ `.addFile` æ–¹æ³•æ·»åŠ çš„æ‰€æœ‰æ–‡ä»¶ã€‚

#### addFile
è¯¥æ–¹æ³•åˆ›å»º [GeneratorFile](https://github.com/adonisjs/ace/blob/develop/src/Generator/File.ts) ç±»çš„æ–°å®ä¾‹ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼› é¦–å…ˆï¼Œæ–‡ä»¶åï¼ˆå¸¦æˆ–ä¸å¸¦æ‰©å±•åï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯é€‰é¡¹å¯¹è±¡ã€‚

```ts
this.generator.addFile(
  'UserController',
  {
    // force filename to be plural
    form: 'plural',

    // define ".ts" extension when not already defined
    extname: '.ts',

    // re-format the name to "camelCase"
    pattern: 'camelcase',

    // add "Controller" suffix, when not already defined
    suffix: 'Controller',

    // Do not pluralize when controller name matches one of the following
    formIgnoreList: ['Home', 'Auth', 'Login']
  }
)
```

#### destinationDir
å®šä¹‰è¦åœ¨å…¶ä¸­åˆ›å»ºæ–‡ä»¶çš„ç›®æ ‡ç›®å½•ã€‚ä½ è¿˜å¯ä»¥ä» `.adonisrc.json` æ–‡ä»¶ä¸­æå–ç›®å½•åç§°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```ts
// Get path to the config directory
file.destinationDir(
  this.application.directoriesMap.get('config')!
)

// Get path to the controllers namespace
file.destinationDir(
  this.application.resolveNamespaceDirectory('httpControllers')!
)
```

#### appRoot
å®šä¹‰åº”ç”¨ç¨‹åºçš„æ ¹ã€‚è¿™æ˜¯ `destinationDir` çš„å‰ç¼€ä»¥åˆ›å»ºç»å¯¹è·¯å¾„ã€‚

```ts
file.appRoot(this.application.appRoot)
```

#### stub
å®šä¹‰å­˜æ ¹æ¨¡æ¿çš„ç»å¯¹è·¯å¾„ã€‚ä½ å¯ä»¥ä½¿ç”¨ ES6 æ¨¡æ¿æ–‡å­—ç¼–å†™æ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é¦–å…ˆè°ƒç”¨ `useMustache` æ–¹æ³•æ¥ä½¿ç”¨ [mustache](https://mustache.github.io/)ã€‚

```ts
file
  .useMustache() // use mustache as the template engine
  .stub(join(__dirname, 'templates/controller.txt'))
```

#### apply
ä¸ mustache æ¨¡æ¿å…±äº«æ•°æ®ã€‚å½“å‰æ–‡ä»¶åï¼ˆåœ¨åº”ç”¨æ‰€æœ‰è½¬æ¢ä¹‹åï¼‰ä½œä¸º `filename` å±æ€§ä¸æ¨¡æ¿å…±äº«ã€‚

```ts
file.apply({
  resourceful: true
})
```

#### run
`generator.run` æ–¹æ³•å¼€å§‹åˆ›å»ºä½¿ç”¨ `.addFile` æ–¹æ³•å®šä¹‰çš„æ–‡ä»¶ã€‚å¦‚æœç›®æ ‡è·¯å¾„å·²ç»å­˜åœ¨ï¼Œç”Ÿæˆå™¨ä¼šè·³è¿‡è¯¥æ–‡ä»¶ã€‚

```ts
await this.generator.run()
```

## ç”Ÿå‘½å‘¨æœŸé’©å­
å‘½ä»¤å¯ä»¥å®šä¹‰ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚

`prepare` æ–¹æ³•åœ¨è¿è¡Œ run æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚è€Œ `completed` æ–¹æ³•åœ¨ run æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚

```ts
export default class Greet extends BaseCommand {
  public async prepare() {
    console.log('before run')
  }

  public async run() {
    console.log('run')
  }

  public async completed() {
    console.log('after run')
  }
}
```

å¦‚æœå‡ºç°é”™è¯¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ `completed` æ–¹æ³•ä¸­çš„ `this.error` å±æ€§è®¿é—®é”™è¯¯ã€‚

## ä»¥ç¼–ç¨‹æ–¹å¼æ‰§è¡Œå‘½ä»¤
åœ¨åŒä¸€è¿›ç¨‹ä¸­æ‰§è¡Œå…¶ä»–å‘½ä»¤ä¸æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚å‘½ä»¤ä¸åº”è¯¥è¢«ä»£ç çš„ä¸åŒéƒ¨åˆ†ä½¿ç”¨ï¼Œå› ä¸º**å®ƒä»¬å¯¼å‡ºç”¨æˆ·ç•Œé¢**å¹¶ä¸”**ä¸æ˜¯ç¼–ç ç•Œé¢**ã€‚ä¾‹å¦‚ï¼š

- ä½ å¯ä»¥ä»è¿›ç¨‹é€€å‡ºä»£ç ä¸­æ‰¾åˆ°å‘½ä»¤çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯æŸä¸ªè¿”å›å€¼ã€‚
- å‘½ä»¤ç›´æ¥å°†å…¶çŠ¶æ€è½¬å‚¨åˆ°ç»ˆç«¯ï¼Œå¹¶ä¸”ä¸å°†å…¶å­˜å‚¨åœ¨æŸäº›å±æ€§ä¸­ï¼Œä»¥ä¾¿ä»¥ç¼–ç¨‹æ–¹å¼è®¿é—®ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œæœ‰å‡ ç§æ–¹æ³•å¯ä»¥ä»¥ç¼–ç¨‹æ–¹å¼æ‰§è¡Œå‘½ä»¤ã€‚

### ä½œä¸ºå­è¿›ç¨‹æ‰§è¡Œå‘½ä»¤
æ¨èçš„æ–¹æ³•æ˜¯åœ¨å•ç‹¬çš„å­è¿›ç¨‹ä¸­æ‰§è¡Œå‘½ä»¤ã€‚ä½ å¯ä»¥ä½¿ç”¨ Node.js `child_process` æ¨¡å—æˆ–ä½¿ç”¨ [execa](https://npm.im/execa) npm æ¨¡å—ã€‚

```ts
// highlight-start
import execa from 'execa'
// highlight-end
import { BaseCommand } from '@adonisjs/core/build/standalone'

export default class Greet extends BaseCommand {
  public static commandName = 'greet'

  public async run() {
    // highlight-start
    const { exitCode } = await execa.node('ace', ['make:controller', 'User'], {
      stdio: 'inherit',
    })
    // highlight-end
  }
}
```

### åœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…æ‰§è¡Œå‘½ä»¤
å¦ä¸€ç§é€‰æ‹©æ˜¯åˆ©ç”¨ Ace å†…æ ¸åœ¨åŒä¸€è¿›ç¨‹ä¸­æ‰§è¡Œå‘½ä»¤ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæ— æ³•çŸ¥é“å‘½ä»¤çš„é€€å‡ºä»£ç ã€‚

```ts
import { BaseCommand } from '@adonisjs/core/build/standalone'

export default class Greet extends BaseCommand {
  public static commandName = 'greet'

  public async run() {
    // highlight-start
    await this.kernel.exec('make:controller', ['User'])
    // highlight-end
  }
}
```

## ç”Ÿæˆ Ace æ¸…å•æ–‡ä»¶
Ace manifest æ˜¯æ‰€æœ‰å·²æ³¨å†Œå‘½ä»¤çš„ JSON ç´¢å¼•ã€‚å®ƒå…è®¸ Ace åœ¨ä¸åŠ è½½æ‰€æœ‰å‘½ä»¤æ–‡ä»¶çš„æƒ…å†µä¸‹æŸ¥æ‰¾å‘½ä»¤ã€å®ƒæ¥å—çš„å‚æ•°/æ ‡å¿—ã€‚

ç”Ÿæˆç´¢å¼•å¯¹äºæ€§èƒ½è‡³å…³é‡è¦ã€‚å¦åˆ™ï¼Œå¯¼å…¥æ‰€æœ‰å‘½ä»¤ï¼Œä½¿ç”¨å†…å­˜ä¸­çš„ TypeScript ç¼–è¯‘å™¨ç¼–è¯‘å®ƒä»¬å°†èŠ±è´¹å¤§é‡æ—¶é—´ï¼Œç”šè‡³æ‰“å°å¸®åŠ©å±å¹•ã€‚

AdonisJS åœ¨ä»¥ä¸‹äº‹ä»¶æœŸé—´è‡ªåŠ¨æ›´æ–° `ace-manifest.json` æ–‡ä»¶ã€‚

- æ¯æ¬¡ä½¿ç”¨ `node ace configure` å‘½ä»¤å®‰è£…å’Œé…ç½®è½¯ä»¶åŒ…æ—¶ã€‚
- å½“æ–‡ä»¶è§‚å¯Ÿç¨‹åºè¿è¡Œæ—¶ï¼Œä½ æ›´æ”¹äº†å­˜å‚¨åœ¨ `commands` ç›®å½•ä¸­çš„å‘½ä»¤æ–‡ä»¶ã€‚

ä»…è¿™ä¸¤ä¸ªäº‹ä»¶å°±æ¶µç›–äº†å¤§å¤šæ•°ç”¨ä¾‹ã€‚ä½†æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨æ›´æ–°æ¸…å•æ–‡ä»¶ã€‚

```sh
node ace generate:manifest
```
